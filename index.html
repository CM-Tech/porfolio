<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Testing</title>
	<script src="https://d3js.org/d3.v5.min.js"></script>
	<style>
		body {
			overflow: hidden;
			margin: 0;
			padding: 0;
		}
	</style>
</head>

<body>
	<script>
		var width = window.innerWidth,
			height = window.innerHeight;

		var svg = d3.select("body").append("svg")
			.attr("width", width)
			.attr("height", height);

		var nodes = d3.range(100).map(() => ({ r: 10, nr: Math.random() * 10 + 100 }));
		nodes[0].r = 0;
		var m = [0, 0];
		var collide = d3.forceCollide().radius((d) => d.r + 10);
		var simulation = d3.forceSimulation(nodes)
			.alphaDecay(0)
			.force("charge", d3.forceManyBody().strength((_, i) => i ? 0 : 100))
			.force("center", d3.forceCenter(width / 2, height / 2))
			.force("collide", collide)
			.on("tick", () => {
				var node = simulation.find(m[0], m[1]);
				var closestNode = [node.index, Math.sqrt(Math.pow(node.x - m[0], 2) + Math.pow(node.y - m[1], 2)) - node.r]

				for (var i = 1; i < nodes.length; i++) {
					if (closestNode[1] < 0 && closestNode[0] == i) {
						if (nodes[closestNode[0]].r < 200) {
							nodes[closestNode[0]].r += 2;
						}
					} else {
						if (nodes[i].r > nodes[i].nr + 2) {
							nodes[i].r -= 2;
						} else if (nodes[i].r < nodes[i].nr - 2) {
							nodes[i].r += 2;
						}
					}
				}
				collide.radius((d) => d.r + 10)
				svg.selectAll("circle")
					.attr("cx", (d) => d.x)
					.attr("cy", (d) => d.y)
					.attr("r", (d) => d.r);
			});

		svg.selectAll("circle")
			.data(nodes.slice(1))
			.enter().append("circle")
			.style("fill", (d, i) => d3.schemeCategory10[i % 6]);

		svg.on("mousemove", function () {
			m = d3.mouse(this);
			simulation.restart();
		});
	</script>
</body>

</html>