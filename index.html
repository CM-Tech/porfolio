<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Testing</title>
	<script src="https://d3js.org/d3.v5.min.js"></script>
	<style>
		body {
			overflow: hidden;
			margin: 0;
			padding: 0;
		}
	</style>
</head>

<body>
	<script>
		var width = window.innerWidth,
			height = window.innerHeight;

		var svg = d3.select("body").append("svg")
			.attr("width", width)
			.attr("height", height)
			.call(d3.zoom()
				.scaleExtent([1 / 2, 8])
				.on("zoom", () => {
					svg.selectAll("circle").attr("transform", d3.event.transform);
				}));

		var nodes = d3.range(100).map(() => {
			var r = Math.random() * 10 + 100
			return { nr: r, r }
		});
		nodes[0].r = 0;

		var collide = d3.forceCollide().radius((d) => d.r + 10);
		var simulation = d3.forceSimulation(nodes)
			.alphaDecay(0)
			.force("charge", d3.forceManyBody().strength((_, i) => i ? 0 : 100))
			.force("center", d3.forceCenter(width / 2, height / 2))
			.force("collide", collide)
			.on("tick", () => {
				collide.radius((d) => d.r + 10)
				svg.selectAll("circle")
					.attr("cx", (d) => d.x)
					.attr("cy", (d) => d.y)
			});

		svg.selectAll("circle")
			.data(nodes.slice(1))
			.enter().append("circle")
			.style("fill", (d, i) => d3.schemeCategory10[i % 6])
			.attr("r", (d) => d.nr)
			.on("mouseover", function (d, i) {
				d3.select(this).transition()
					.duration(750)
					.ease(d3.easeLinear)
					.tween("r", () => {
						var node = d3.select(this),
							lerp = d3.interpolateNumber(d.r, 200);
						return (t) => {
							nodes[d.index].r = lerp(t);
							node.attr("r", lerp(t))
						}
					});
			})
			.on("mouseout", function (d, i) {
				d3.select(this).transition()
					.duration(750)
					.ease(d3.easeLinear)
					.tween("r", () => {
						var node = d3.select(this),
							lerp = d3.interpolateNumber(d.r, d.nr);
						return (t) => {
							nodes[d.index].r = lerp(t);
							node.attr("r", lerp(t))
						}
					});
			});
	</script>
</body>

</html>